if("undefined"==typeof jQuery)throw new Error("丢失jQuery库文件");var debug=!0,_global={app_key:"123456",access_token:"789789"};$(function(){var e=["openAddress","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"];_global&&_global.jsapi_config&&wx.config({debug:debug,appId:_global.jsapi_config.appId,timestamp:_global.jsapi_config.timestamp,nonceStr:_global.jsapi_config.nonceStr,signature:_global.jsapi_config.signature,jsApiList:e}),Array.prototype.del=function(e){if(isNaN(e)||e>=this.length)return!1;for(var n=0,o=0;n<this.length;n++)this[n]!=this[e]&&(this[o++]=this[n]);this.length-=1},$.extend({init:function(){$.rem(),template.config("escape",!1),_global.browser.agent=$.browser.agent(),_global.browser.system=$.browser.system(),debug&&(console.log(_global),console.log("环境："+_global.browser.agent+" 系统："+_global.browser.system+" 屏幕宽度："+_global.browser.width+" 根字体大小："+_global.browser.fontSize))},rem:function(){var e=$(window).width(),n=20;e>=320&&e<=640?n*=e/375:n=e<320?16:35;var o={};o.width=e,o.fontSize=n,_global.browser=o,$("html").css("fontSize",n)},withNav:function(e){$("body").addClass("with-nav-top"),$(e).headroom({tolerance:5,offset:50,classes:{initial:"nav-animated",pinned:"nav-slideDown",unpinned:"nav-slideUp"}})},h5show:function(e){var n=$.extend({},{navShow:!0,copyShow:!0,topShow:!1,menuShow:!0},e);if(0==n.navShow?$("#j-nav").hide():$.withNav("#j-nav"),0==n.copyShow?$("#j-copy").hide():n.menuShow?$("body").addClass("with-menu-copy-bottom"):$("body").addClass("with-copy-bottom"),0==n.menuShow?$("#j-menu").hide():(n.copyShow?$("body").addClass("with-menu-copy-bottom"):$("body").addClass("with-menu-bottom"),$("#j-copy").css("paddingBottom","2.25rem")),0==n.topShow)$("#j-top").hide();else{var o=$("#j-top");o.hide(),$(window).on("scroll",function(){$(window).scrollTop()>=200?o.fadeIn():o.stop(!0).fadeOut()}),o.on("click",function(){return $("html, body").animate({scrollTop:0},500),!1})}},browser:{u:window.navigator.userAgent,type:function(){if(u=this.u.toLowerCase(),u.indexOf("khtml")>-1||u.indexOf("konqueror")>-1||u.indexOf("applewebKit")>-1)var e=u.indexOf("chrome")>-1,n=u.indexOf("applewebKit")>-1&&!e;return window.opr&&u.indexOf("opr")>-1?"Opera":e?"Chrome":n?"Safari":u.indexOf("firefox")>0?"Firefox":"unknow"},agent:function(){u=this.u.toLowerCase();var e=window.external;return/msie/.test(u)?"IE":u.indexOf("firefox")>0?"Firefox":u.indexOf("micromessenger")>-1?"weixin":u.indexOf("opr")>0?"Opera":u.indexOf("qqbrowser")>-1?"qq":u.indexOf("se 2.x")>-1?"sogou":u.indexOf("maxthon")>-1?"maxthon":u.indexOf("baiduboxapp")>-1?"baidu":u.indexOf("ucbrowser")>-1?"uc":window.chrome&&e&&"LiebaoGetVersion"in e?"liebao":"unknow"},system:function(){return u=this.u,u.indexOf("Android")>-1||u.indexOf("Linux")>-1?"Android":u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?"ios":"unknow"}},loading:function(){$(".loading").size()?$(".loading").remove():$("body").append('<div class="loading loading-circle"><span></span><span></span><span></span></div>')},html2img:function(e,n){html2canvas($(e),{useCORS:!0,background:"#fff"}).then(function(e){n(e.toDataURL("image/jpeg"))})},getUrlPara:function(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(n);return null!=o?unescape(o[2]):null},wxAddress:function(e,n){wx.openAddress({success:function(n){e(n)},cancel:function(e){n(e)},fail:function(e){n(e)}})},wxPay:function(e,n,o){wx.chooseWXPay({timestamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(){n()},fail:function(){o()},cancel:function(){o()},complete:function(){}})},wxLocation:function(e,n){wx.getLocation({type:"gcj02",success:function(n){e(n)},cancel:function(e){n(e)}})},wxShare:function(e){e=$.extend({title:"",desc:"",link:"",imgUrl:"",type:"link",dataUrl:"",trigger:function(){},complete:function(){},success:function(){},fail:function(){}},e),wx.ready(function(){var n={title:e.title,link:e.link,imgUrl:e.imgUrl,trigger:e.trigger,complete:e.complete,success:e.success,fail:e.fail};wx.onMenuShareAppMessage($.extend(n,{desc:e.desc,type:e.type,dataUrl:e.dataUrl})),wx.onMenuShareTimeline(n),wx.onMenuShareQQ($.extend(n,{desc:e.desc})),wx.onMenuShareWeibo($.extend(n,{desc:e.desc}))})},mAjax:function(e,n,o,t){var i="get";t&&(i=t),$.loading(),datas=$.extend({app_key:_global.app_key,access_token:_global.access_token},n),console.log(datas),$.ajax({type:i,url:_global.url.api+e,dataType:"json",data:datas}).done(function(e){$.loading(),o(e)}).fail(function(e){console.log(e),$.tip("哎呀，服务器离家出走了")})},resize:function(e){e(),$(window).on("resize",function(){e()})},form2Json:function(e){var n=$(e).serializeArray(),o={};return $.each(n,function(){o[this.name]?(o[this.name].push||(o[this.name]=[o[this.name]]),o[this.name].push(this.value||"")):o[this.name]=this.value||""}),console.log(o),o},getSelectVal:function(e){return $(e+" option:selected").val()},getCheckVal:function(e){var n=[];return $('input[name="'+e+'"]:checked').each(function(){n.push($(this).val())}),n},regCheck:{def:function(e,n){return e.test(n)},email:function(e){return/^([a-zA-Z0-9]|[._])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/.test(e)},mobile:function(e){return/^(1[3|4|5|7|8][0-9]\d{8})$/.test(e)},CN:function(e){return/^[\u4E00-\u9FA5]+$/.test(e)},carsh:function(e){return/^\d*\.?\d+$/.test(e)},num:function(e){return/^\+?[1-9][0-9]*$/.test(e)}},format:{mobile:function(e){return e.substring(0,3)+"****"+e.substring(7)}},webSokect:function(){var e=new WebSocket("ws://120.27.196.220:8686");e.onopen=function(e){},e.onclose=function(e){},e.onmessage=function(e){},e.onerror=function(e){},$("#sendmsg").on("click",function(){var n=$("#test").val();e.send(n)})}}),$.init()});