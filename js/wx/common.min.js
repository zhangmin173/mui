if("undefined"==typeof jQuery)throw new Error("丢失jQuery库文件");+function(t){t.extend({init:function(){this.rem()},getUrlPara:function(t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(n);return null!=e?unescape(e[2]):null},wxPay:function(t,n,e){wx.chooseWXPay({timestamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign,success:function(){n()},fail:function(){e()},cancel:function(){e()},complete:function(){}})},h5Show:function(n){var e=t.extend({},{navShow:!1,menuShow:!1,footerLinkShow:!1},n);e.navShow?t("#js-nav").show():t("#js-nav").hide(),e.menuShow?t("#js-menu").show():t("#js-menu").hide(),e.footerLinkShow?t("#js-footerLink").show():t("#js-footerLink").hide()},wxShare:function(n){n=t.extend({title:"",desc:"",link:"",imgUrl:"",type:"link",dataUrl:"",trigger:function(){},complete:function(){},success:function(){},fail:function(){}},n),wx.ready(function(){var e={title:n.title,link:n.link,imgUrl:n.imgUrl,trigger:n.trigger,complete:n.complete,success:n.success,fail:n.fail};wx.onMenuShareAppMessage(t.extend(e,{desc:n.desc,type:n.type,dataUrl:n.dataUrl})),wx.onMenuShareTimeline(e),wx.onMenuShareQQ(t.extend(e,{desc:n.desc})),wx.onMenuShareWeibo(t.extend(e,{desc:n.desc}))})},random:function(t,n){return Math.round(Math.random()*(n-t)+t)},fetch:function(t){console.log(_global),"function"==typeof t&&t(_global)},mAjax:function(n,e,o){datas=t.extend({app_key:_global.app_key,access_token:_global.access_token,site_id:_global.site_info.id},e),console.log(datas),t.ajax({type:"post",url:n,dataType:"json",data:datas}).done(function(t){o(t)}).fail(function(){alert("url:"+接口报错)})},jsonP:function(n,e,o){datas=t.extend({app_key:_global.app_key,access_token:_global.access_token,site_id:_global.site_info.id},e),t.ajax({type:"post",url:_global.url.api+n,dataType:"json",data:datas}).done(function(t){o(t)}).fail(function(){alert("url:"+接口报错)})},render:function(t,n,e){laytpl(t).render(n,function(t){e(t)})},rem:function(){this.resize(function(){var n=t(window).width(),e=10;n>540&&(n=540),e*=n/320,t("html").css("font-size",e+"px")})},log:function(t){console.log(t)},regCheck:{def:function(t,n){return t.test(n)},userName:function(t){return/^[_A-Za-z0-9]{6,16}$/.test(t)},psw:function(t){return/^[\w~!@#$%^&*()_+{}:"<>?\-=[\];\',.\/A-Za-z0-9]{6,16}$/.test(t)},email:function(t){return/^([a-zA-Z0-9]|[._])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/.test(t)},telNum:function(t){return/^((0\d{2,3}-\d{7,8})|(1[3|5|4|7|8][0-9]\d{8}))$/.test(t)},mobile:function(t){return/^(1[3|4|5|7|8][0-9]\d{8})$/.test(t)},verify:function(t){return/^\d{6}$/.test(t)},CN:function(t){return/^[\u4E00-\u9FA5]+$/.test(t)},carsh:function(t){return/^\d*\.?\d+$/.test(t)}},resize:function(n){n(),t(window).on("resize",function(){n()})},format:{mobile:function(t){return t.substring(0,3)+"****"+t.substring(7)}},toTop:function(n){var e=t.extend({},{pdBottom:"10px"},n);t("body").append(e.str);var o=t("#toTop");o.hide(),t(window).on("scroll",function(){t(window).scrollTop()>=200?o.fadeIn():o.stop(!0).fadeOut()}),o.css({bottom:e.pdBottom}),o.on("click",function(){return t("html, body").animate({scrollTop:0},500),!1})}}),t.fn.extend({mobilePageLoad:function(n){function e(){var n=a.queryParams();n.offset=(a.pageIndex-1)*a.pageSize,n.limit=a.pageSize,t.mAjax(a.url,n,function(n){console.log(n),a.onBeforeLoad(n);try{a.total=n.total,0==n.total?a.obj.html(a.initNoData):t.render(t("#"+a.tempId).html(),n.data,function(t){a.obj.append(t)})}catch(t){a.obj.html(a.initNoData)}a.onLoadSuccess(n)})}var o={url:"",tempId:"",obj:"",pageSize:10,pageIndex:1,isOne:!0,total:0,initNoData:"暂无相关信息",noData:"没有更多信息",queryParams:function(){return{}},obj:"",onLoadSuccess:function(t){},onBeforeLoad:function(t){}},a=t.extend({},o,n);a.obj=t(this),t(window).scroll(function(){var n=parseFloat(t(window).height())+parseFloat(t(window).scrollTop());t(document).height()<=n&&(a.total>a.pageIndex*a.pageSize?(a.pageIndex++,e()):1==a.isOne&&(a.obj.append(a.noData),a.isOne=!1))}),e()},waterfall:function(n){function e(){var n=c.queryParams();n.offset=(c.pageIndex-1)*c.pageSize,n.limit=c.pageSize,console.log(n),t.mAjax(c.url,n,function(n){console.log(n),c.onBeforeLoad(n);try{c.total=n.total,0==n.total?c.obj.html(c.initNoData):(t.render(t("#"+c.tempId).html(),n.data,function(t){c.obj.append(t)}),o())}catch(t){c.obj.html(c.initNoData)}c.onLoadSuccess(n)})}function o(){var n=c.obj.find("."+c.itemClass),e=n.find("."+c.imgClass),o=e.length;n.css("width",c.colWidth+"px"),e.load(function(){t(this).parent("."+c.itemClass).removeClass(c.itemClass),0==--o&&(n.each(function(){var n=i(),e=c.colLeft[n.index],o=n.min+c.gutter,a=t(this).height()+c.gutter;t(this).css({left:e+"px",top:o+"px"}),c.colHeight[n.index]+=a}),a())})}function a(){c.obj.height(Math.max.apply(null,c.colHeight)+2*c.gutter)}function i(){for(var t=Math.min.apply(null,c.colHeight),n=0,e=0;e<c.colHeight.length;e++)if(c.colHeight[e]==t){n=e;break}return{min:t,index:n}}var s={url:"",tempId:"",tipId:"js-nodata",obj:"",pageSize:10,pageIndex:1,isOne:!0,total:0,initNoData:"暂无相关信息",noData:"已经没有了",imgLoad:!0,imgClass:"js-load-img",itemClass:"js-load",gutter:10,colNum:2,colWidth:0,colLeft:[],colHeight:[],queryParams:function(){return{}},onLoadSuccess:function(t){},onBeforeLoad:function(t){}},c=t.extend({},s,n);c.obj=t(this),c.colWidth=(t(this).width()-(c.colNum-1)*c.gutter)/c.colNum;for(var l=0;l<c.colNum;l++)c.colLeft[l]=l*(c.colWidth+c.gutter),c.colHeight[l]=0;t(window).scroll(function(){var n=parseFloat(t(window).height())+parseFloat(t(window).scrollTop());t(document).height()<=n&&(c.total>c.pageIndex*c.pageSize?(c.pageIndex++,e()):1==c.isOne&&(t("#"+c.tipId).append(c.noData),c.isOne=!1))}),e()},lazyLoad:function(){function n(){t(e).each(function(){t(this).height();var n=t(this).get(0).getBoundingClientRect().top;if(console.log(t(this).index()+":"),console.log(t(this).get(0).getBoundingClientRect()),n<200&&t(this).hasClass("lazy")){var e=this,o=new Image;o.src=t(e).data("src"),t(e).attr("data-src",0),t(e).removeClass("lazy"),o.onload=function(){t(e).hide().attr("src",o.src).show()}}})}var e=this;parseFloat(t(window).height());n(),t(window).on("scroll",function(){n()})},tabCard:function(n){function e(n,e){var o=t("#"+n);o&&o.hasClass("loaded")||(t("#"+n).addClass("loaded"),t("#"+n).waterfall({tempId:"TempId",url:a.url[e],onLoadSuccess:function(t){a.onLoadSuccess(t)}}))}var o={tabObj:"",cardObj:"",thisId:"",url:[],onLoadSuccess:function(t){}},a=t.extend({},o,n);a.tabObj=t(this).find(".js-tab"),a.cardObj=t(this).find(".js-card"),a.thisId=t(this).attr("id"),function(){var n=a.tabObj.find("li").length,e=a.tabObj.width(),o=0;console.log(e),n<5?o=parseInt(e/n):(o=parseInt(e/5),a.tabObj.find("ul").width(o*n)),a.tabObj.find("li").width(o),a.tabObj.find("li").eq(0).addClass("active"),a.cardObj.find(".m-card").each(function(n,e){t(this).attr("id",a.thisId+"-"+n)}),t("#"+a.thisId+"-0").addClass("active loaded"),t("#"+a.thisId+"-0").waterfall({tempId:"TempId",url:a.url[0],onLoadSuccess:function(t){a.onLoadSuccess(t)}})}(),a.tabObj.find("li").on("click",function(){t(this).addClass("active").siblings("li").removeClass("active");var n=t(this).index();a.cardObj.find(".m-card").removeClass("active"),t("#"+a.thisId+"-"+n).addClass("active"),a.cardObj.animate({scrollTop:0},"200"),e(a.thisId+"-"+n,n)})}}),t.init()}(jQuery);