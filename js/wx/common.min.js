if("undefined"==typeof jQuery)throw new Error("丢失jQuery库文件");+function(e){console.log("全局执行"),e.extend({init:function(){this.rem()},rem:function(){this.resize(function(){var n=e(window).width(),t=10;n>540&&(n=540),t*=n/320,e("html").css("font-size",t+"px")})},getUrlPara:function(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(n);return null!=t?unescape(t[2]):null},h5Show:function(n){var t=e.extend({},{navShow:!1,menuShow:!1,footerLinkShow:!1,toTop:!1},n);t.navShow?(e("#js-nav").show(),e.getScript("/mui/js/lib/headromm/0.7.0/headroom.js",function(n,t,o){"success"==t&&(e.fn.headroom=function(n){return this.each(function(){var t=e(this),o=t.data("headroom"),i="object"==typeof n&&n;i=e.extend(!0,{},Headroom.options,i),o||((o=new Headroom(this,i)).init(),t.data("headroom",o)),"string"==typeof n&&(o[n](),"destroy"===n&&t.removeData("headroom"))})},e("#js-nav").headroom({tolerance:5,offset:50,classes:{initial:"animated",pinned:"slideDown",unpinned:"slideUp"}}))})):e("#js-nav").hide(),t.menuShow?e("#js-menu").show():e("#js-menu").hide(),t.footerLinkShow?e("#js-footerLink").show():e("#js-footerLink").hide(),t.toTop&&e.toTop({})},wxPay:function(e,n,t){wx.chooseWXPay({timestamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(){n()},fail:function(){t()},cancel:function(){t()},complete:function(){}})},wxShare:function(n){n=e.extend({title:"",desc:"",link:"",imgUrl:"",type:"link",dataUrl:"",trigger:function(){},complete:function(){},success:function(){},fail:function(){}},n),wx.ready(function(){var t={title:n.title,link:n.link,imgUrl:n.imgUrl,trigger:n.trigger,complete:n.complete,success:n.success,fail:n.fail};wx.onMenuShareAppMessage(e.extend(t,{desc:n.desc,type:n.type,dataUrl:n.dataUrl})),wx.onMenuShareTimeline(t),wx.onMenuShareQQ(e.extend(t,{desc:n.desc})),wx.onMenuShareWeibo(e.extend(t,{desc:n.desc}))})},mAjax:function(n,t,o){datas=e.extend({app_key:_global.app_key,access_token:_global.access_token,site_id:_global.site_info.id},t),console.log(datas),e.ajax({type:"post",url:n,dataType:"json",data:datas}).done(function(e){o(e)}).fail(function(){alert("本地请求失败")})},jsonP:function(n,t,o){datas=e.extend({app_key:_global.app_key,access_token:_global.access_token,site_id:_global.site_info.id},t),console.log(datas),e.ajax({type:"post",url:n,dataType:"jsonp",jsonp:"jsonpcalback",data:datas}).done(function(e){o(e)}).fail(function(){alert("跨域请求失败")})},resize:function(n){n(),e(window).on("resize",function(){n()})},render:function(e,n,t){t(template(e,n))},log:function(e){console.log(e)},form2Json:function(n){var t=e(n).serializeArray(),o={};return e.each(t,function(){o[this.name]?(o[this.name].push||(o[this.name]=[o[this.name]]),o[this.name].push(this.value||"")):o[this.name]=this.value||""}),console.log(o),o},getSelectVal:function(n){return e(n+" option:selected").val()},getCheckVal:function(n){var t=[];return e('input[name="'+n+'"]:checked').each(function(){t.push(e(this).val())}),t},regCheck:{def:function(e,n){return e.test(n)},userName:function(e){return/^[_A-Za-z0-9]{6,16}$/.test(e)},psw:function(e){return/^[\w~!@#$%^&*()_+{}:"<>?\-=[\];\',.\/A-Za-z0-9]{6,16}$/.test(e)},email:function(e){return/^([a-zA-Z0-9]|[._])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/.test(e)},telNum:function(e){return/^((0\d{2,3}-\d{7,8})|(1[3|5|4|7|8][0-9]\d{8}))$/.test(e)},mobile:function(e){return/^(1[3|4|5|7|8][0-9]\d{8})$/.test(e)},verify:function(e){return/^\d{6}$/.test(e)},CN:function(e){return/^[\u4E00-\u9FA5]+$/.test(e)},carsh:function(e){return/^\d*\.?\d+$/.test(e)}},format:{mobile:function(e){return e.substring(0,3)+"****"+e.substring(7)}},loadShow:function(){e("body").append('<div class="m-loading"><span></span><span></span><span></span></div>')},loadOver:function(){e(".m-loading").remove()},toTop:function(n){var t=e.extend({},{bottom:"6rem",str:'<a id="toTop" href="javascript:;" style="position:fixed;z-index:999;right:1.5rem;display:block;width:3rem;height:3rem;line-height:3rem;text-align:center;background-color:#f00;color:#fff;">↑</a>'},n);e("body").append(t.str);var o=e("#toTop");o.css("bottom",t.bottom),o.hide(),e(window).on("scroll",function(){e(window).scrollTop()>=200?o.fadeIn():o.stop(!0).fadeOut()}),o.css({bottom:t.bottom}),o.on("click",function(){return e("html, body").animate({scrollTop:0},500),!1})}}),e.fn.extend({}),e.init()}(jQuery);