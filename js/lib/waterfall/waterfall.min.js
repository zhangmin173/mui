!function(t){var i;t.fn.waterfall=function(l){if("string"==typeof l)return t.fn.waterfall.methods[l](this);var e={thisID:"",itemClass:"",gutter:10,colNum:2,colWidth:0,colLeft:[],colHeight:[]};(i=t.extend(e,l)).thisID=t(this).attr("id"),i.colWidth=(t(this).width()-(i.colNum-1)*i.gutter)/i.colNum;for(var h=0;h<i.colNum;h++)i.colLeft[h]=h*(i.colWidth+i.gutter),i.colHeight[h]=0;t("#"+i.thisID).waterfall("fall")},t.fn.waterfall.methods={fall:function(l){function e(){i.obj.height(Math.max.apply(null,i.colHeight)+2*i.gutter)}function h(){for(var t=Math.min.apply(null,i.colHeight),l=0,e=0;e<i.colHeight.length;e++)if(i.colHeight[e]==t){l=e;break}return{min:t,index:l}}var n=t("#"+i.thisID).find("."+i.itemClass),o=n.find("."+i.imgClass),a=o.length;n.css("width",i.colWidth+"px"),o.load(function(){t(this).parent("."+i.itemClass).removeClass(i.itemClass),0==--a&&(n.each(function(){var l=h(),e=i.colLeft[l.index],n=l.min+i.gutter,o=t(this).height()+i.gutter;t(this).css({left:e+"px",top:n+"px"}),i.colHeight[l.index]+=o}),e())})}}}(jQuery);