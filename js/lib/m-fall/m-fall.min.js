!function(t){var l;t.fn.MFall=function(i){if("string"==typeof i)return t.fn.MFall.methods[i](this);var o={imgLoad:!0,itemClass:"fall-box",imgClass:"fall-img",gutter:10,colNum:2,colWidth:0,colLeft:[],colHeight:[]};l=t.extend(o,i);var e=t(this);l.colWidth=(e.width()-(l.colNum-1)*l.gutter)/l.colNum;for(var n=0;n<l.colNum;n++)l.colLeft[n]=n*(l.colWidth+l.gutter),l.colHeight[n]=0;return e.MFall("init"),e},t.fn.MFall.methods={init:function(t){t.MFall("load")},load:function(i){function o(){i.height(Math.max.apply(null,l.colHeight)+2*l.gutter)}function e(){for(var t=Math.min.apply(null,l.colHeight),i=0,o=0;o<l.colHeight.length;o++)if(l.colHeight[o]==t){i=o;break}return{min:t,index:i}}var n=i.find("."+l.itemClass),a=n.find("."+l.imgClass),c=a.length;n.css("width",l.colWidth+"px"),l.imgLoad&&a.load(function(){console.log(c),--c<=0&&(n.each(function(){var i=e(),o=l.colLeft[i.index],n=i.min+l.gutter,a=t(this).height()+l.gutter;t(this).css({left:o+"px",top:n+"px"}),l.colHeight[i.index]+=a}),console.log(n),i.find("."+l.itemClass).removeClass(l.itemClass),o())})}}}(jQuery);