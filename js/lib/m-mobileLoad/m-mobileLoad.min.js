!function(e){var o;e.fn.MobileLoad=function(n){if("string"==typeof n)return e.fn.MobileLoad.methods[n](this);var a={url:"",model:"",page:!1,pageSize:10,pageIndex:1,isOver:!1,isOneShow:!0,initNoData:"暂无相关信息",noData:"已经没有更多数据了!",queryParams:function(){return{}},onLoadSuccess:function(e){},onBeforeLoad:function(e){}};o=e.extend(a,n);var i=e(this);return e(window).scroll(function(){var n=Math.ceil(e(window).height())+Math.ceil(e(window).scrollTop());e(document).height()<=n&&0==o.isOver&&i.MobileLoad("load")}),i.MobileLoad("init"),i},e.fn.MobileLoad.methods={init:function(e){e.MobileLoad("load")},load:function(n){var a=o.queryParams();o.page?(a.pageIndex=o.pageIndex,a.pageSize=o.pageSize):(a.offset=(o.pageIndex-1)*o.pageSize,a.limit=o.pageSize),e.ajax({url:o.url,type:"get",dataType:"json",data:a}).done(function(e){if(console.log(e),e.rows.length>0){1==o.pageIndex&&(o.isOneShow=!1),o.pageIndex++,o.onBeforeLoad(e);var a=template(o.model,e);n.append(a),o.onLoadSuccess(e)}else o.isOver=!0,o.isOneShow?n.append(o.initNoData):n.append(o.noData)}).fail(function(){console.log("error")})},reLoad:function(e){o.pageIndex=1,o.isOver=!1,o.isOneShow=!0,e.html(""),e.MobileLoad("load")}}}(jQuery);