<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
	<title>图片上传</title>
	<script src="js/lib/jquery/1.9.1/jquery.js"></script>
	<link rel="stylesheet" href="js/lib/webuploader/webuploader.css">
	<script src="js/lib/webuploader/webuploader.js"></script>
</head>
<body>
<div>
	<ul class="m-upload" id="js-uploadlist">
		<li>
			<img class="m-upload-img" src="img/banner-1.jpg"><i class="formid"></i>
			<span class="m-upload-del">X</span>
		</li>
		<li>
			<img class="m-upload-img" src="img/banner-2.jpg"><i class="formid"></i>
			<span class="m-upload-del">X</span>
		</li>
		<li>
			<img class="m-upload-img" src="img/banner-3.jpg"><i class="formid"></i>
			<span class="m-upload-del">X</span>
		</li>
		<li>
			<img class="m-upload-img" src="img/test.jpg"><i class="formid"></i>
			<span class="m-upload-del">X</span>
		</li>
	</ul>
	<div class="m-upload-add" id="js-uploadbtn" >
		+
	</div>
</div>
	<script>
		$(function() {
			uploadInit();
		})
		// 上传初始化
		function uploadInit() {
	        var $list = $("#js-uploadlist"),len = 0, $item = null;
	        // 上传准备
	        var uploader = WebUploader.create({
	            auto: true, //开启自动上传
	            fileVal: 'filedata',
	            formData: {
	                access_token:'',
	                app_key: '',
	            },
	            swf: 'Uploader.swf',
	            server: '/upload.php',
	            pick: '#js-uploadbtn',
	            // 只允许选择图片文件。
	            accept: {
	                title: 'Images',
	                extensions: 'gif,jpg,jpeg,bmp,png',
	                mimeTypes: 'image/jpg,image/jpeg,image/png'
	            },
	            method:'post',
	        })             
	        // 上传成功 
	        uploader.on('uploadSuccess', function(file, res) {  
	            console.log(file);
	        });          
	        // 上传失败 
	        uploader.on('uploadError', function(file, res) { 
	            console.log(res);
	        });   
	    }
	</script>
</body>
</html>