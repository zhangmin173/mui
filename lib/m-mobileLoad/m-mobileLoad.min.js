!function(e){var a;e.fn.MobileLoad=function(o){if("string"==typeof o)return e.fn.MobileLoad.methods[o](this);var n={url:"",model:"",page:!1,pageSize:10,pageIndex:1,total:0,isOver:!1,isOneShow:!0,initNoData:"",noData:"",queryParams:function(){return{}},onLoadSuccess:function(e){},onBeforeLoad:function(){}};a=e.extend(n,o);var i=e(this);return e(window).scroll(function(){var o=Math.ceil(e(window).height())+Math.ceil(e(window).scrollTop());e(document).height()<=o&&0==a.isOver&&i.MobileLoad("load")}),i.MobileLoad("init"),i},e.fn.MobileLoad.methods={init:function(e){e.MobileLoad("load")},load:function(o){var n=a.queryParams();a.page?(n.pageIndex=a.pageIndex,n.pageSize=a.pageSize):(n.offset=(a.pageIndex-1)*a.pageSize,n.limit=a.pageSize),a.onBeforeLoad(),e.ajax({url:a.url,type:"get",dataType:"json",data:n}).done(function(e){if(console.log(e),e.total&&(a.total=e.total),2==a.pageIndex&&(a.isOneShow=!1),a.page)if(a.total>=a.pageIndex*a.pageSize){a.pageIndex++;n=template(a.model,e);o.append(n),a.onLoadSuccess(e)}else a.isOver=!0,a.isOneShow?o.append(a.initNoData):o.append(a.noData);else if(e.data&&e.data.length){a.pageIndex++;var n=template(a.model,e);o.append(n),a.onLoadSuccess(e)}else a.isOver=!0,a.isOneShow?o.append(a.initNoData):o.append(a.noData)}).fail(function(){console.log("error")})},reLoad:function(e){a.pageIndex=1,a.isOver=!1,a.isOneShow=!0,e.html(""),e.MobileLoad("load")}}}(jQuery);